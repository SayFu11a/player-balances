/**
 * Валидация суммы: не более 2 знаков после запятой, только положительные числа.
 *
 * Почему это важно в финансовых приложениях:
 *
 * Сервер хранит деньги как целые числа (int64) в минимальных единицах валюты
 * (копейки, центы, filsi и т.д.) — это стандартная практика в финтехе.
 * Например: 100.50 KES хранится как 10050 в базе данных.
 *
 * Причины такого подхода:
 * 1. Числа с плавающей точкой (float) дают погрешности при арифметике.
 *    Например: 0.1 + 0.2 = 0.30000000000000004 в JavaScript.
 *    В финансах такие расхождения недопустимы — это реальные деньги.
 * 2. Целые числа (int64) хранятся и сравниваются точно, без округлений.
 * 3. Ограничение в 2 знака соответствует делимости большинства валют (1/100).
 *
 * Поэтому: клиент валидирует до 2 знаков, умножает на 100 перед отправкой,
 * а сервер получает всегда корректное целое число.
 */
export const getValidationError = (value: string): string | null => {
  if (!value || value.trim() === "") {
    return "Введите сумму";
  }

  const num = parseFloat(value);

  if (isNaN(num)) {
    return "Введите корректное число";
  }

  if (num <= 0) {
    return "Сумма должна быть больше нуля";
  }

  // Проверка на максимум 2 знака после запятой
  if (!/^\d+(\.\d{1,2})?$/.test(value)) {
    return "Максимум 2 знака после запятой (например: 100.50)";
  }

  return null; // null = валидно
};
